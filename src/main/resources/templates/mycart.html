<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>My Cart</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        .card img {
            height: 180px;
            object-fit: contain;
            padding: 10px;
        }
        .card-title {
            font-size: 1.1rem;
            font-weight: bold;
        }
        .card-price {
            font-size: 1rem;
            font-weight: bold;
            color: #28a745;
        }
    </style>
</head>
<body class="bg-light">
	<div class="container mt-4">

	    <!-- Navbar -->
	    <div th:replace="menu :: header"></div>

	    <h2 class="text-center mb-4">My Cart</h2>

	    <div th:if="${cartProducts != null and !cartProducts.isEmpty()}" class="row">
	        <div class="col-md-3 mb-4" th:each="p : ${cartProducts}">
	            <div class="card h-100 shadow-sm">
	                <img th:if="${p.photofilename != null}" 
	                     th:src="'data:image/jpeg;base64,' + ${p.photofilename}" 
	                     class="card-img-top" alt="Product Image" style="height:220px; object-fit:contain; padding:10px;">

	                <div class="card-body d-flex flex-column">
	                    <h5 class="card-title" th:text="${p.pname}">Product Name</h5>
	                    <p class="card-text mb-1" th:text="${p.category}">Category</p>
	                    <p class="card-price">₹<span th:text="${p.pprice}">Price</span></p>
	                </div>
	            </div>
	        </div>
	    </div>
		<div th:if="${cartProducts != null and !cartProducts.isEmpty()}"
		     class="row mt-4">
		    <div class="col-12 text-end">
		        <h4>
		            Total Amount :
		            ₹ <span th:text="${total}"></span>
		        </h4>
		    </div>
		</div>


		<!-- If NOT logged in -->
		<a th:if="${session.loggedUser == null}"
		   href="/login"
		   class="btn btn-warning btn-lg mt-2">
		    Proceed to Buy
		</a>

		<!-- If logged in -->
		<a th:if="${session.loggedUser != null}"
		   href="/checkout"
		   class="btn btn-warning btn-lg mt-2">
		    Proceed to Buy
		</a>

	 

	    <div th:if="${cartProducts == null or cartProducts.isEmpty()}" class="alert alert-info text-center">
	        Your cart is empty.
	    </div>

	</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
